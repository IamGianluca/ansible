- hosts: localhost
  pre_tasks:
    - name: Check if homebrew is avaiable
      block:
        - name: Try using homebrew in check_mode (no changes)
          homebrew:
            update_homebrew: true
          check_mode: true
        - name: Homebrew available
          debug:
            msg: Homebrew is installed
      rescue:
        - name: No homebrew
          debug:
            msg: Homebrew is not installed
    - name: Update homebrew
      community.general.homebrew:
        update_homebrew: true
  tasks:
    - import_tasks: tasks/macos_neovim.yml
    - import_tasks: tasks/macos_tmux.yml
    - import_tasks: tasks/macos_mosh.yml
